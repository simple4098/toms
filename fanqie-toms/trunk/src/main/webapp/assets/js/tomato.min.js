;!function(t){var e=e||{},n=Object.prototype.toString;e.version="0.0.2",e.noop=function(){},e.type=function(t){var e;return null==t?e=String(t):(e=n.call(t).toLowerCase(),e=e.substring(8,e.length-1)),e},e.isFunction=function(t){return"[object Function]"===n.call(t)},e.isArray=Array.isArray||function(t){return"[object Array]"===n.call(t)},e.extend=function(){var t,n,i,a,o,r=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[s]||{},s=2),"object"==typeof r||e.isFunction(r)||(r={}),s===l&&(r=this,s--);l>s;s++)if(null!=(n=arguments[s]))for(i in n)t=r[i],a=n[i],r!==a&&(c&&a&&"object"==typeof a&&!a.nodeTCype?(o=e.isArray(a)?t&&e.isArray(t)?t:[]:t&&"object"==typeof t&&!t.nodeTCype?t:{},r[i]=e.extend(c,o,a)):void 0!==a&&(r[i]=a));return r},e.getVm=function(t){return avalon.vmodels[t]},t.TC=e,t.__uri=function(t){return t};var i={log:function(){}};t.console=t.console||i}(window),function(t){t.extend({isEmpty:function(t){return void 0===t||null===t||""===t}})}(TC),function(t){var e=36e5,n=24*e,a=["日","一","二","三","四","五","六"],o={y:"FullYear",M:"Month",d:"Date",h:"Hours",w:"Week",m:"Minutes",s:"Seconds",S:"Milliseconds"},r={lunarInfo:[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],sTermInfo:[0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758],solarTerm:new Array("","","","","","","清明","","","","","","","","立秋","","","","","","立冬","","","冬至"),lFtv:new Array("0101*春节","0115 元宵","0505 端午","0707 七夕","0715 中元","0815 中秋","0909 重阳","1208 腊八","1224 小年","0100*除夕"),sFtv:new Array("0101*元旦","0214 情人","0308 妇女","0401 愚人","0501 劳动","0504 青年","0601 儿童","0910 教师","1001*国庆","1224 平安","1225 圣诞"),Lunar:function(t){var e,n={},i=0,a=0,o=new Date(1900,0,31),r=(t-o)/864e5;for(n.dayCyl=r+40,n.monCyl=14,e=1900;2050>e&&r>0;e++)a=this.lYearDays(e),r-=a,n.monCyl+=12;for(0>r&&(r+=a,e--,n.monCyl-=12),n.year=e,n.yearCyl=e-1864,i=this.leapMonth(e),n.isLeap=!1,e=1;13>e&&r>0;e++)i>0&&e==i+1&&0==n.isLeap?(--e,n.isLeap=!0,a=this.leapDays(n.year)):a=this.monthDays(n.year,e),1==n.isLeap&&e==i+1&&(n.isLeap=!1),r-=a,0==n.isLeap&&n.monCyl++;return 0==r&&i>0&&e==i+1&&(n.isLeap?n.isLeap=!1:(n.isLeap=!0,--e,--n.monCyl)),0>r&&(r+=a,--e,--n.monCyl),n.month=e,n.day=r+1,n},getholiday:function(e){var n,a,o=t.date(e),r=this.Lunar(o),s=(new Array(3),o.getFullYear()),l=o.getMonth(),c=o.getDate(),u="",d="",h="",f="",m=this.lFtv,g=this.sFtv;for(i in m)m.hasOwnProperty(i)&&m[i].match(/^(\d{2})(.{2})([\s\*])(.+)$/)&&(n=Number(RegExp.$1)-r.month,a=Number(RegExp.$2)-parseInt(r.day),0==n&&0==a&&(f=RegExp.$4));for(i in g)g.hasOwnProperty(i)&&g[i].match(/^(\d{2})(\d{2})([\s\*])(.+)$/)&&(n=Number(RegExp.$1)-(l+1),a=Number(RegExp.$2)-c,0==n&&0==a&&(h=RegExp.$4));return n=new Date(31556925974.7*(s-1900)+6e4*this.sTermInfo[2*l+1]+Date.UTC(1900,0,6,2,5)),a=n.getUTCDate(),a==c&&(d=this.solarTerm[2*l+1]),n=new Date(31556925974.7*(s-1900)+6e4*this.sTermInfo[2*l]+Date.UTC(1900,0,6,2,5)),a=n.getUTCDate(),a==c&&(d=this.solarTerm[2*l]),u=""==d&&""==h&&""==f?"":d+h+f},lYearDays:function(t){var e,n=348;for(e=32768;e>8;e>>=1)n+=this.lunarInfo[t-1900]&e?1:0;return n+this.leapDays(t)},leapDays:function(t){return this.leapMonth(t)?65536&this.lunarInfo[t-1900]?30:29:0},leapMonth:function(t){return 15&this.lunarInfo[t-1900]},monthDays:function(t,e){return this.lunarInfo[t-1900]&65536>>e?30:29}};t.extend({date:function(t){return t?("string"==typeof t&&(t=t.replace(/-/g,"/")),new Date(t)):new Date},today:function(){return this.timefmt(new Date)},getWeek:function(t){return a[this.date(t).getDay()]},getholiday:function(){return r.getholiday.apply(r,arguments)},timefmt:function(t,e){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};e=e||"yyyy-MM-dd",/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return e},plusDate:function(t,e,n,i){if(t){e=null==e?1:+e,n=n?o[n]:o.d;var a=this.date(t),r="set"+n,s="get"+n;return o.w===n?a.setDate(a.getDate()+7*e):a[r](a[s]()+e),i?this.timefmt(a,i):a}},getDatePeriod:function(t,i,a){var t=this.date(t),i=this.date(i);switch(a){case"y":return i.getFullYear()-t.getFullYear();case"M":return 12*(i.getFullYear()-t.getFullYear())+(i.getMonth()-t.getMonth());case"w":return Math.floor((1*i-1*t)/n/7);case"h":return Math.floor((1*i-1*t)/e);case"m":return Math.floor((1*i-1*t)/60/1e3);case"s":return Math.floor((1*i-1*t)/1e3);case"S":return Math.floor(1*i-1*t);default:return Math.floor((1*i-1*t)/n)}}})}(TC),function(t){t.extend({numberFmt:function(t,e){for(var n=t?String(t).split("."):[0],i=e?String(e).split("."):[""],a="",o=n[0],r=i[0],s=o.length-1,l=!1,c=r.length-1;c>=0;c--)switch(r.substr(c,1)){case"#":s>=0&&(a=o.substr(s--,1)+a);break;case"0":a=s>=0?o.substr(s--,1)+a:"0"+a;break;case",":l=!0,a=","+a}if(s>=0)if(l)for(var u=o.length;s>=0;s--)a=o.substr(s,1)+a,s>0&&(u-s)%3===0&&(a=","+a);else a=o.substr(0,s+1)+a;a+=".",o=n.length>1?n[1]:"",r=i.length>1?i[1]:"",s=0;for(var c=0;c<r.length;c++)switch(r.substr(c,1)){case"#":s<o.length&&(a+=o.substr(s++,1));break;case"0":a+=s<o.length?o.substr(s++,1):"0"}return a.replace(/^,+/,"").replace(/\.$/,"")},numberFilt:function(t,e){var n=/[^\d\.]+/g;return t=t||t+"",e&&(n=/[^\d]+/g),t.replace(n,"")}})}(TC),function(t){var e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;t.extend({trim:function(t){return t=null==t?"":t+"","".trim?"".trim.call(t):t.replace(e,"")},truncate:function(t,e,n){var i=t||"";return n=n||"...",i.length>e&&(i=i.substr(0,e)+n),i}})}(TC),function(t){function e(n,i,a){var o,r,s=Object.prototype.hasOwnProperty;a=a?a+".":"";for(o in n)s.call(n,o)&&(r=n[o],t.isArray(r)?r.forEach(function(t,n){e(t,i,a+o+"["+n+"]")}):"object"===t.type(r)?e(r,i,a+o):i.constructor===jQuery?$("<input/>").attr("name",a+o).val(r).appendTo(i):i[a+o]=r)}t.extend({serialize:function(n,i,a){var o,r,s=Object.prototype.hasOwnProperty,a=a||{};i=i?i+".":"";for(o in n)s.call(n,o)&&(r=n[o],t.isArray(r)?r.forEach(function(t,n){e(t,a,i+o+"["+n+"]")}):"object"===t.type(r)?e(r,a,i+o):a.constructor===jQuery?$("<input/>").attr("name",i+o).val(r).appendTo(a):a[i+o]=r);return a},formSubmit:function(t,n,i){var a=$("<form></form>",{method:n,action:t});e(i,null,a),a.css("display","none").appendTo($("body")).submit()}})}(TC),function(t){var e=function(){var e=0,n={title:"",content:"",visible:!0,width:null,height:null,button:null,time:0,lock:!0,maskName:"",skin:"",okText:"确定",ok:null,cancel:null,cancelText:"取消",parent:null,openAnimate:null,closeAnimate:null},i='<div class="ui-dialog"><div class="ui-dialog-inner" data-dom="dialog"><div class="ui-dialog-head" data-dom="head"><h3 class="ui-dialog-title" data-dom="title"></h3><a class="ui-dialog-close" href="javascript:;" data-dom="close">×</a></div><div class="ui-dialog-body" data-dom="body"></div><div class="ui-dialog-foot" data-dom="foot"><div class="ui-dialog-btns" data-dom="buttons"></div></div></div></div>',a=function(i){return i=i||{},"string"==typeof i&&(i={content:i}),i=t.extend({},n,i),t.isArray(i.button)||(i.button=[]),i.ok&&i.button.push({id:"ok",text:i.okText,cb:i.ok,highlight:!0}),i.cancel&&i.button.push({id:"cancel",text:i.cancelText,cb:i.cancel}),i.id=i.id||"dialog-"+e++,a.list[i.id]?a.list[i.id]:a.list[i.id]=new a.fn._create(i)};return a.fn=a.prototype={visible:function(){var t=this._$("wrap");return t.addClass("ui-dialog-visible"),this.config.openAnimate?this.config.openAnimate(t):this._$("wrap").show(),this},hide:function(){return this._$("wrap").removeClass("ui-dialog-visible").fadeOut(),this.time().unlock(),this},close:function(){var t=this,e=this._$("wrap");t.time().unlock(),this.config.closeAnimate?this.config.closeAnimate(e):this._$("wrap").fadeOut("fast",function(){$(this).remove()}),delete a.list[t.config.id];for(var n in t)delete t[n];return t},title:function(t){return t?this._$("title").html(t).parent().show():this._$("title").parent().empty().hide(),this},content:function(t){return this._$("body").html(t),this},width:function(e){return"number"===t.type(e)&&this._$("body").width(e),this},height:function(e){return"number"===t.type(e)&&this._$("body").height(e),this},button:function(t){var e,n,i,a,o,r,s=this._$("buttons")[0],l=this._callback,t=t||[];for(e=0,i=t.length;i>e;e++)n=t[e],r=n.id,a=document.createElement("button"),o="ui-dialog-btn",n.highlight&&(o+=" ui-dialog-btn-on"),n.className&&(o+=" "+n.className),a.innerHTML=n.text,a.className=o,a.setAttribute("callback",r),l[r]={},n.cb&&(l[r].cb=n.cb),s.appendChild(a);return s.style.display=t.length?"":"none",this},time:function(t){var e=this,n=e._timer;return n&&clearTimeout(n),t&&(e._timer=setTimeout(function(){e._click("close")},t)),e},lock:function(t){var e=document.createElement("div"),n="ui-dialog-mask";return t&&(n+=" "+t),e.className=n,document.body.appendChild(e),this._dom.mask=$(e).fadeIn(),this},unlock:function(){this._$("mask").fadeOut().remove()},_create:function(t){var e=this;return e._callback={},e._dom={},e._createHTML(t),e.config=t,e._$("close").on("click",function(){e._click("cancel")}),t.skin&&e._$("wrap").addClass(t.skin),e.title(t.title).content(t.content).width(t.width).height(t.height).button(t.button).time(t.time)._addEvent(),t.lock&&e.lock(t.maskName),e[t.visible?"visible":"hide"](),e},_createHTML:function(t){var e=$(i),n=$(t.parent?t.parent:document.body);return n.append(e),this._dom.wrap=e,this},_$:function(t){var e=this._dom;return e[t]||(e[t]=e.wrap.find("[data-dom="+t+"]"))},_addEvent:function(){var t=this;return t._$("buttons").on("click","button",function(){var e,n=$(this);e=n.attr("callback"),e&&t._click(e)}),this},_click:function(t){var e=this,n=e._callback[t]&&e._callback[t].cb;return"function"!=typeof n||n.call(e)!==!1?e.close():e}},a.fn._create.prototype=a.fn,a.version="0.0.1",a.list={},a.get=function(t){return t?a.list[t]:void 0},a.alert=function(e){return"string"==typeof e&&(e={content:e}),a(t.extend({ok:!0},e))},a.confirm=function(t,e,n){var i={title:"提示消息",content:t?t:"",ok:e?e:!0,cancel:n?n:!0};return a(i)},a.tips=function(t,e,n){"string"==typeof t&&(t={content:t,time:n});var i=e?"msc-dialog-tips-icon msc-dialog-tips-"+e+"-icon":"";return t=t||{},t.skin="msc-dialog-tips",t.content='<div class="'+i+'">'+t.content+"</div>",t.time=t.time||2e3,a(t)},a.notify=function(t){var e=a.notify.wrap||$("<div>",{"class":"ui-dialog-notify-fixed"}).appendTo($(document.body));return a.notify.wrap=e,a({title:"番茄来了提醒您 ",skin:"ui-dialog-notice",content:t,lock:!1,ok:!0,parent:e,openAnimate:function(t){var e=t.height();t.height(0).animate({height:e},"slow")},closeAnimate:function(t){t.animate({height:0},"slow",function(){$(this).remove()})}})},a.loading=function(t){var e,n=a.get("dialog-loading"),i="ui-dialog-mask-white";return t=null==t?"拼命加载中...":t,e='<div class="ui-dialog-loading" title="加载中">'+t+"</div>",n?n.lock(i).content(e).visible():a({id:"dialog-loading",skin:"msc-dialog-loading",content:e,maskName:i})},a.loading.close=function(){var t=a.get("dialog-loading");t&&(t.hide(),t=null)},a.mask=function(){var t=a.mask.$mask||$("<div>",{"class":"ui-dialog-mask"}).appendTo($(document.body));a.mask.$mask=t.fadeIn()},a.mask.close=function(){a.mask.$mask&&a.mask.$mask.fadeOut()},a}();t.extend({dialog:e})}(TC);